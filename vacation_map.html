<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vacation Properties Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        h1 {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin: 0;
        }

        .trip-dates {
            text-align: center;
            padding: 15px;
            background-color: #f8f9fa;
            color: #666;
            font-size: 18px;
            border-bottom: 2px solid #e9ecef;
        }

        #map {
            width: 100%;
            height: 600px;
            margin: 0;
        }

        .table-container {
            padding: 30px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
        }

        tr:hover {
            background-color: #f8f9fa;
        }

        .location-cell {
            font-size: 14px;
        }

        .city {
            font-weight: 600;
            color: #333;
        }

        .region {
            color: #666;
            font-size: 13px;
        }

        .coordinates {
            color: #999;
            font-size: 12px;
            font-family: monospace;
        }

        .capacity-badge {
            display: inline-block;
            padding: 4px 10px;
            background-color: #667eea;
            color: white;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .amenities {
            font-size: 13px;
            color: #666;
        }

        .amenity-tag {
            display: inline-block;
            padding: 3px 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            margin: 2px;
            font-size: 11px;
        }

        .property-link {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }

        .property-link:hover {
            text-decoration: underline;
        }

        .no-coords {
            color: #dc3545;
            font-size: 12px;
            font-style: italic;
        }

        .leaflet-popup-content {
            font-size: 14px;
        }

        .popup-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 8px;
            color: #333;
        }

        .popup-location {
            color: #666;
            margin-bottom: 8px;
        }

        .popup-capacity {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .popup-link {
            display: inline-block;
            margin-top: 8px;
            padding: 6px 12px;
            background-color: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 12px;
        }

        .popup-link:hover {
            background-color: #764ba2;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background-color: #f8f9fa;
            margin: 20px 30px;
            border-radius: 8px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: #667eea;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèñÔ∏è Vacation Properties - Group Trip 2026</h1>
        <div class="trip-dates">
            üìÖ Travel Dates: May 23, 2026 - June 6, 2026 (14 nights)
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="total-properties">0</div>
                <div class="stat-label">Total Properties</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="with-coords">0</div>
                <div class="stat-label">With Coordinates</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="max-capacity">0</div>
                <div class="stat-label">Max Capacity</div>
            </div>
        </div>

        <div id="map"></div>

        <div class="table-container">
            <h2>Property Details</h2>
            <table id="properties-table">
                <thead>
                    <tr>
                        <th>Property Name</th>
                        <th>Location</th>
                        <th>Capacity</th>
                        <th>Bedrooms</th>
                        <th>Description</th>
                        <th>Amenities</th>
                        <th>Link</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Embedded JSON data to avoid CORS issues
        const properties = [{"name":"Mulino Al Suono","location":{"address":"Il Prato","city":"Bucine","region":"Toscana","country":"Italy","lat":43.4417372,"lng":11.6323437},"description":"Historic stone building from the 1100s and 1800s, 600 m¬≤ villa with 12 bedrooms for max 25 guests. Features private pool (available April 25 - October 19), 10 bathrooms, multiple kitchens, fireplaces, panoramic views of Tuscan countryside. Pet-friendly with parking for 12 vehicles. Located 2 km from Badia Agnano and 26 km from Arezzo.","capacity":"25 guests","bedrooms":12,"amenities":["Pool","WiFi","Multiple kitchens","Fireplace","Dishwasher","Outdoor terrace","Garden","Parking","Pet-friendly"],"url":"https://www.hometogo.de/rental/753d6f211c8383b3"},{"name":"Villa Il Palazzo","location":{"address":"Loc. Fratta 127","city":"Cortona","region":"Toskana","country":"Italy","postal_code":"52044","lat":null,"lng":null},"description":"Villa with garden views offering amenities like a seasonal outdoor pool, free bicycles, and various room types. High rated property (9.7/10 based on 3 reviews). Features kitchen facilities and TV/entertainment options in rooms.","rating":"9.7/10","amenities":["Seasonal outdoor pool","Free bicycles","Kitchen facilities","TV/entertainment"],"url":"https://www.booking.com/hotel/it/il-palazzo-cortona.de.html"},{"name":"Property in Croatia (p2587789)","location":{"address":null,"city":null,"region":null,"country":"Croatia","lat":45.099999,"lng":15.2},"description":"Vacation rental property in Croatia. Specific details not available, but coordinates suggest location in central Croatia.","amenities":[],"url":"https://www.fewo-direkt.de/ferienwohnung-ferienhaus/p2587789","note":"Limited information available"},{"name":"Property in Croatia (p11533586)","location":{"address":null,"city":null,"region":null,"country":"Croatia","lat":45.099999,"lng":15.2},"description":"Vacation rental property in Croatia. Specific details not available, but coordinates suggest location in central Croatia.","amenities":[],"url":"https://www.fewo-direkt.de/ferienwohnung-ferienhaus/p11533586","note":"Limited information available"},{"name":"La Civetta","location":{"address":"Via Gorizia, 56","city":"Cecina","province":"Livorno","country":"Italy","lat":43.359083,"lng":10.529056},"description":"Spacious 80m¬≤ independent apartment with private porch, garden access, fully equipped kitchen, TV, sofa, bathroom with shower, and two bedrooms (one matrimonial on ground floor, another with matrimonial bed and two single beds upstairs). Features air conditioning and accommodates up to 6 people.","capacity":"6 guests","bedrooms":2,"amenities":["Air conditioning","Laundry machine","Bed and bath linens","Free parking","Pool and solarium (seasonal)","Wi-Fi","Television"],"url":"https://www.ilnazareno.com/agriturismo/la-civetta/"},{"name":"Anwesen Sant'Apollinare","location":{"address":null,"city":null,"region":null,"country":"Italy","lat":null,"lng":null},"description":"Property details could not be fully extracted from the listing.","amenities":[],"url":"https://www.airbnb.at/rooms/18230591","note":"Limited information available"},{"name":"Wundersch√∂nes Bauernhaus im Gr√ºnen","location":{"address":null,"city":"Cagli","province":"Pesaro Urbino","region":null,"country":"Italy","lat":null,"lng":null},"description":"Beautiful farmhouse in the green countryside near Cagli in the Pesaro Urbino province.","amenities":[],"url":"https://www.airbnb.de/rooms/5984765","note":"Limited information available"},{"name":"Toskanisches Casale","location":{"address":null,"city":"Manciano","region":"Toskana","country":"Italy","lat":null,"lng":null},"description":"Villa with glorious views that can accommodate 18 guests in Tuscany.","capacity":"18 guests","amenities":[],"url":"https://www.airbnb.de/rooms/11518427","note":"Limited information available"},{"name":"Cascina Bozzetti","location":{"address":null,"city":"Pareto","region":"Alessandria, Piemont","country":"Italy","lat":44.5258541,"lng":8.3602953},"description":"Exclusive agriturismo (farm stay) with 10 bedrooms accommodating up to 24 guests. Features include shared pool, kitchen, fireplace, WiFi, and mountain views. Offers a rustic, authentic Italian countryside experience with spaces for events and conferences. Includes panoramic terrace, tennis courts, and proximity to Beigua Regional Natural Park.","capacity":"24 guests","bedrooms":10,"bathrooms":11,"amenities":["Shared pool","Kitchen","WiFi","Fireplace","Grill","Mountain views","Tennis courts","Parking","Suitable for events"],"url":"https://de.agriturismo.it/rental/becbc00606440d88"},{"name":"House in Montefiascone","location":{"address":null,"city":"Montefiascone","region":null,"country":"Italy","lat":null,"lng":null},"description":"Property details could not be fully extracted from the listing.","amenities":[],"url":"https://www.airbnb.at/rooms/1083234848848404774","note":"Limited information available"},{"name":"Bauernhaus Follonica","location":{"address":null,"city":"Follonica","region":"Toscana","country":"Italy","lat":null,"lng":null},"description":"Large farmhouse with pool located 3 km from the sea, sleeps 18+ people in Tuscany.","capacity":"18+ guests","amenities":["Pool"],"url":"https://www.airbnb.at/rooms/1751075","note":"3 km to sea"},{"name":"House in Lucca","location":{"address":null,"city":"Lucca","region":"Toskana","country":"Italy","lat":null,"lng":null},"description":"Property details could not be fully extracted from the listing.","amenities":[],"url":"https://www.airbnb.at/rooms/947164531345555363","note":"Limited information available"},{"name":"Podere Beatrice 20P","location":{"address":null,"city":"Fivizzano","region":"Toscana","country":"Italy","lat":44.23835,"lng":10.12599},"description":"Charming country house with large pool, free Wi-Fi, and grill located near Cinque Terre in Fivizzano. Features 12 bedrooms accommodating up to 20 people. Located in the historic Lunigiana region with medieval castles.","capacity":"20 guests","bedrooms":12,"amenities":["Pool","WiFi","Grill","Fireplace","TV","Parking","Pet-friendly","Non-smoking"],"url":"https://www.fewo-direkt.de/ferienwohnung-ferienhaus/p8929857","note":"Near Cinque Terre"},{"name":"Property in Tuscany (p434055)","location":{"address":null,"city":null,"region":"Toskana","country":"Italy","lat":43.769871,"lng":11.255576},"description":"Vacation rental property in Tuscany. Specific details not available, but coordinates suggest location in central Tuscany.","amenities":[],"url":"https://www.fewo-direkt.de/ferienwohnung-ferienhaus/p434055","note":"Limited information available"},{"name":"La Tana del Ghiro","location":{"address":"Monteleone","city":"Roncofreddo","region":"Emilia-Romagna","country":"Italy","lat":44.0460046,"lng":12.2685685},"description":"Spacious 750 m¬≤ villa with 9 bedrooms, accommodating up to 18 guests. Features private pool (15 x 5 m), garden (4000 sq m), and panoramic hill views. Pet-friendly with modern amenities including WiFi, kitchen, and air conditioning.","capacity":"18 guests","bedrooms":9,"bathrooms":10,"amenities":["Private pool","WiFi","Air conditioning","Kitchen","Grill","Garden","Pet-friendly"],"url":"https://www.hometogo.de/rental/cb405151ecef389a"},{"name":"Agriturismo Casa Ansietta","location":{"address":null,"city":"Corridonia","region":"Macerata","country":"Italy","lat":43.2222167,"lng":13.5472058},"description":"Spacious 350 m¬≤ farmhouse accommodating up to 20 guests with 8 bedrooms and 7 bathrooms. Features three separate apartments (Melograno, Girasole, and Glicine) with panoramic views of the Marchigian hills and surrounding landscape. Shared pool and family-friendly.","capacity":"20 guests","bedrooms":8,"bathrooms":7,"amenities":["Shared pool","Whirlpool","Barbecue","Kitchen","Air conditioning","Pet-friendly","Family-friendly","WiFi","Heating"],"url":"https://www.hometogo.de/rental/464671f6742f8f81"}];

        // Process properties
        (function() {
                // Initialize map centered on Italy/Croatia region
                const map = L.map('map').setView([44.0, 13.0], 6);

                // Add OpenStreetMap tiles
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                    maxZoom: 19
                }).addTo(map);

                // Custom icon
                const customIcon = L.icon({
                    iconUrl: 'data:image/svg+xml;base64,' + btoa(`
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="42" viewBox="0 0 32 42">
                            <path fill="#667eea" stroke="#fff" stroke-width="2" d="M16 0C7.2 0 0 7.2 0 16c0 8.8 16 26 16 26s16-17.2 16-26C32 7.2 24.8 0 16 0z"/>
                            <circle cx="16" cy="16" r="6" fill="#fff"/>
                        </svg>
                    `),
                    iconSize: [32, 42],
                    iconAnchor: [16, 42],
                    popupAnchor: [0, -42]
                });

                // Add markers for properties with coordinates
                const markers = [];
                let withCoords = 0;
                let maxCapacity = 0;

                properties.forEach(property => {
                    if (property.location.lat && property.location.lng) {
                        withCoords++;
                        const marker = L.marker([property.location.lat, property.location.lng], { icon: customIcon })
                            .addTo(map);

                        const popupContent = `
                            <div class="popup-title">${property.name}</div>
                            <div class="popup-location">${property.location.city || ''}, ${property.location.region || ''}</div>
                            ${property.capacity ? `<div class="popup-capacity">üë• ${property.capacity}</div>` : ''}
                            ${property.bedrooms ? `<div>üõèÔ∏è ${property.bedrooms} bedrooms</div>` : ''}
                            <a href="${property.url}" target="_blank" class="popup-link">View Listing ‚Üí</a>
                        `;

                        marker.bindPopup(popupContent);
                        markers.push(marker);
                    }

                    // Calculate max capacity
                    if (property.capacity) {
                        const capacityNum = parseInt(property.capacity.match(/\d+/));
                        if (capacityNum > maxCapacity) maxCapacity = capacityNum;
                    }
                });

                // Fit map to show all markers
                if (markers.length > 0) {
                    const group = L.featureGroup(markers);
                    map.fitBounds(group.getBounds().pad(0.1));
                }

                // Update stats
                document.getElementById('total-properties').textContent = properties.length;
                document.getElementById('with-coords').textContent = withCoords;
                document.getElementById('max-capacity').textContent = maxCapacity;

                // Populate table
                const tableBody = document.getElementById('table-body');

                properties.forEach(property => {
                    const row = document.createElement('tr');

                    // Property Name
                    const nameCell = document.createElement('td');
                    nameCell.textContent = property.name;
                    row.appendChild(nameCell);

                    // Location
                    const locationCell = document.createElement('td');
                    locationCell.className = 'location-cell';
                    const locationParts = [];
                    if (property.location.city) locationParts.push(`<span class="city">${property.location.city}</span>`);
                    if (property.location.region) locationParts.push(`<span class="region">${property.location.region}</span>`);
                    if (property.location.country) locationParts.push(`<span class="region">${property.location.country}</span>`);
                    locationCell.innerHTML = locationParts.join(', ');

                    if (property.location.lat && property.location.lng) {
                        locationCell.innerHTML += `<br><span class="coordinates">${property.location.lat.toFixed(4)}, ${property.location.lng.toFixed(4)}</span>`;
                    } else {
                        locationCell.innerHTML += `<br><span class="no-coords">No coordinates</span>`;
                    }
                    row.appendChild(locationCell);

                    // Capacity
                    const capacityCell = document.createElement('td');
                    if (property.capacity) {
                        capacityCell.innerHTML = `<span class="capacity-badge">${property.capacity}</span>`;
                    } else {
                        capacityCell.textContent = '-';
                    }
                    row.appendChild(capacityCell);

                    // Bedrooms
                    const bedroomsCell = document.createElement('td');
                    bedroomsCell.textContent = property.bedrooms || '-';
                    row.appendChild(bedroomsCell);

                    // Description
                    const descCell = document.createElement('td');
                    descCell.textContent = property.description.substring(0, 150) + (property.description.length > 150 ? '...' : '');
                    descCell.style.maxWidth = '300px';
                    row.appendChild(descCell);

                    // Amenities
                    const amenitiesCell = document.createElement('td');
                    amenitiesCell.className = 'amenities';
                    if (property.amenities && property.amenities.length > 0) {
                        amenitiesCell.innerHTML = property.amenities
                            .slice(0, 5)
                            .map(amenity => `<span class="amenity-tag">${amenity}</span>`)
                            .join(' ');
                        if (property.amenities.length > 5) {
                            amenitiesCell.innerHTML += `<span class="amenity-tag">+${property.amenities.length - 5} more</span>`;
                        }
                    } else {
                        amenitiesCell.textContent = '-';
                    }
                    row.appendChild(amenitiesCell);

                    // Link
                    const linkCell = document.createElement('td');
                    linkCell.innerHTML = `<a href="${property.url}" target="_blank" class="property-link">View ‚Üí</a>`;
                    row.appendChild(linkCell);

                    tableBody.appendChild(row);
                });
        })();
    </script>
</body>
</html>
